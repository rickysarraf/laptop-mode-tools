.TH "LAPTOP-MODE.CONF" "8" 
.SH "NAME" 
.I /etc/laptop-mode/laptop-mode.conf
\- Configuration file for laptop-mode-tools. 
.SH "DESCRIPTION" 
.PP 
This manual page documents the options that can be set in the
.I /etc/laptop-mode/laptop-mode.conf
configuration file and in the modular configuration files in the
.I /etc/laptop-mode/conf.d
directory. For a description of what laptop mode does, see the laptop_mode(8)
manual page.

.SH "SETTINGS" 
.PP 
The syntax of options is \fBOPTION=value\fP. There are some groups of options that
specify values depending on power state and laptop mode is enabled. These use
the prefix "LM_" to indicate that a value is used only when laptop mode is
enabled, "NOLM_" to indicate the opposite, "AC_" to indicate that a value
is used only when the system is running on AC power, and "BATT_" to indicate
that a value is used only when the system is running on batteries. Settings are
prefixed with a combination of an optional LM_/NOLM_ prefix and an optional
AC_/BATT_. For instance, the combination LM_AC_ means "when the system is in
laptop mode and on AC power". (Note that this situation happens only if
.B ENABLE_LAPTOP_MODE_ALWAYS
is enabled!) If one of the prefixes (either LM_/NOLM_ or AC_/BATT_) is missing,
then the value is used independently of the state of laptop mode or AC power,
respectively. Options that start with "CONTROL_" are boolean settings that
determine whether laptop mode tools is allowed to control a certain aspect of
your system. Boolean settings always expect "0" to indicate the false
(negative/no/disabled) value, and "1" to indicate the true
(positive/yes/enabled) value.

.PP
The following sections list the settings that are available in laptop-mode.conf
and in the modular configuration files.
.PP
.B Note:
Many settings were moved from the main configuration file to the modular
configuration files. The settings here are split out by modular configuration 
file, but in installations upgraded from version 1.36 or earlier they may appear
in both. In such cases, the configuration settings in the main configuration
file override those in the modular configuration files. To avoid confusion,
it is advised to move the settings from the main configuration files to the
modular configuration files when this situation is detected.

.SS "\fI/etc/laptop-mode/conf.d/board-specific/\fP"
.PP
The board\-specific settings framework is for users and distributors who would like to ship
their local customized settings on top of the default settings shipped upstream.

Add local customized settings under this folder to override the system defaults.
.PP


.SS "\fI/etc/laptop-mode/laptop-mode.conf\fP"

.PP
This is the main configuration file. It contains the settings for enabling and
disabling, plus the core features: the Linux kernel laptop mode feature and
related settings.

.IP "\fBENABLE_LAPTOP_MODE_TOOLS\fP" 10
This module determines if laptop-mode-tools should be run or not. Default is 1
Set it to 0 if you would like to completely disable laptop-mode-tools

.IP "\fBVERBOSE_OUTPUT\fP" 10
Set this to 1 if you want to see a lot of output when you start/stop laptop mode, and to 0 if you
don't want this. Useful for debugging purposes.

.IP "\fBLOG_TO_SYSLOG\fP" 10
Set this to 1 if you want to log messages to syslog when you start/stop laptop mode, and to 0 if you don't want this. Useful for debugging purposes.

.IP "\fBDEBUG\fP" 10
Set this to 1 if you would like to execute the entire laptop-mode program in debug mode. WARNING: This will create a lot of text output. If you are debugging an individual module, perhaps you would want to enable each module specific debug mode (available in module conf files)


.IP "\fBENABLE_AUTO_MODULES\fP" 10 
Set this to 1 to enable all laptop mode tools modules that are termed safe to be enabled and are marked auto.
With this option alone, you can enable all auto modules. In case you need to fine-control the behavior of individual modules, you can modify them accordingly. Default is 1


.IP "\fBENABLE_LAPTOP_MODE_ON_BATTERY\fP" 10 
.IP "\fBENABLE_LAPTOP_MODE_ON_AC\fP" 10 
These options determine whether laptop mode will be activated when the
computer is on battery or on AC power, respectively. Note that if the
system service laptop-mode is not started, then laptop mode will never
be started, even if this option is enabled.

The ENABLE_LAPTOP_MODE_ON_AC setting is useful when you want to run on a headless machine, in low-power mode, for eg. a Jukebox.
 
.IP "\fBENABLE_LAPTOP_MODE_WHEN_LID_CLOSED\fP" 10 
When this option is enabled, laptop mode will be activated when the laptop's lid is 
closed, even if the system is not working on batteries. Note that if the system service laptop-mode 
is not started, then laptop mode will never be started, even if this option is enabled. 
This feature is only supported on ACPI. 
 
.IP "\fBMINIMUM_BATTERY_CHARGE_PERCENT\fP" 10 
The minimum number of battery minutes, charge (in mAh) or charge (in mWh)
that you want to have available while your laptop is in 
laptop mode. When the number of minutes/mAhs/mWhs goes below this value,
the data loss sensitive features are automatically disabled. Note that some
batteries do not report a discharge rate, which means that
MINIMUM_BATTERY_MINUTES has no effect for these batteries. These options are
only supported on ACPI.

.IP "\fBDISABLE_LAPTOP_MODE_ON_CRITICAL_BATTERY_LEVEL\fP" 10 
If this option is enabled, the data loss sensitive features of laptop mode are
disabled when the battery reports its state as "critical". This option is only
supported on ACPI.

.IP "\fBDISABLE_BATTERY_ALARM_CHECK\fP" 10 
If this option is enabled, the alarm values are ignored from the battery. This
is helpful if you have a broken battery which is reporting false alarms.

.IP "\fBHD\fP" 10 
The hard drives which laptop mode should operate upon. If you have multiple
hard drives, you should list them all in this option, separated by spaces, for
example: "/dev/hda /dev/hdb".

.IP "\fBPARTITIONS\fP" 10 
This option specifies the partitions or mount points that laptop mode should
operate upon. Separate the partitions or mount points by spaces. You can
include the entry "auto" to stand for the partitions on the hard drives
specified in the HD option.
 
.IP "\fBLM_BATT_MAX_LOST_WORK_SECONDS\fP" 10 
.IP "\fBLM_AC_MAX_LOST_WORK_SECONDS\fP" 10 
The maximum number of seconds worth of data that you can lose when power runs out or when the
computer crashes. This is the maximum number of seconds that laptop mode will keep modified data
in memory without being written to disk. (Note that the NOLM value is missing: modifying
this value when laptop mode is disabled is extremely useless, as it won't save you any power, and
will only lose you work.)
 
.IP "\fBCONTROL_READAHEAD\fP" 10 
When this option is enabled, laptop mode tools controls the readahead on the filesystems
it works upon.

.IP "\fBLM_READAHEAD\fP" 10 
.IP "\fBNOLM_READAHEAD\fP" 10 
The number of kilobytes to "read ahead" on your hard disks. Reading ahead means that 
whenever some data is read from disk, the data which is most likely to be accessed next is  
read as well, ahead of time. This then saves a hard disk spinup when the data is actually 
needed, because the data is then already in memory. Don't set this value too
high, because the readahead applies to all files that are read!

.IP "\fBCONTROL_NOATIME\fP" 10 
When this option is enabled, laptop mode tools places the "noatime" option in the mount options
of your filesystems when laptop mode is active. This option has the effect of disabling 
access time logging on files, which may save some disk activity. If you use programs that depend
on access times (e.g., mutt), then you should disable this option, or enable the \fBUSE_RELATIME\fP
option.

.IP "\fBUSE_RELATIME\fP" 10 
When this option is enabled together with the \fBCONTROL_NOATIME\fP option, laptop
mode tools will use the relatime option instead of the noatime option. This option
works for more applications, and still causes relatively low levels of disk writes.
Note that this functionality is only available in recent kernel versions, and laptop
mode tools will ignore this setting for kernels before 2.6.23.

.IP "\fBCONTROL_HD_IDLE_TIMEOUT\fP" 10 
When this option is enabled, laptop mode tools adjusts your hard drives' idle timeouts, i.e.,
the time of inactivity before they spin down.

.IP "\fBLM_AC_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
.IP "\fBLM_BATT_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
.IP "\fBNOLM_HD_IDLE_TIMEOUT_SECONDS\fP" 10 
These settings control the idle timeout for your hard drives. The values are specified in seconds.
Values up to 20 minutes can be represented accurately by the hardware, anything above that is
rounded down to half-hour precision. Use the value 0 to disable idle timeout.

.IP "\fBCONTROL_HD_POWERMGMT\fP" 10 
When this option is enabled, laptop mode tools adjusts your hard drives' power management settings.

.IP "\fBBATT_HD_POWERMGMT\fP" 10 
.IP "\fBLM_AC_HD_POWERMGMT\fP" 10 
.IP "\fBNOLM_AC_HD_POWERMGMT\fP" 10 
These values specify the power management level for your hard drives.
The legal values for these options can be found in the hdparm(8) manual page, 
in the documentation of the \fB-B\fP option.

.IP "\fBCONTROL_HD_WRITECACHE\fP" 10
When this option is enabled, laptop mode tools controls your hard drives' write cache settings.

.IP "\fBNOLM_AC_HD_WRITECACHE\fP" 10
.IP "\fBNOLM_BATT_HD_WRITECACHE\fP" 10
.IP "\fBLM_HD_WRITECACHE\fP" 10
These options specify whether the write caches should be enabled for your hard drives.

.IP "\fBCONTROL_SYSLOG_CONF\fP (deprecated)" 10 
When this option is enabled, laptop mode tools controls 
.I /etc/syslog.conf
as a
symlink. This option is deprecated. Use the configuration-file-control module
instead, which is configured in the
.I /etc/laptop-mode/conf.d/configuration-file-control.conf
module configuration file.

.SS "Advanced laptop-mode.conf options"

These options normally do not need to be modified from their default values. Do
not tweak these settings unless you know what you are doing.

.IP "\fBASSUME_SCSI_IS_SATA\fP" 10
This option, enabled by default, tells laptop mode tools to assume that a
device /dev/sdX is a SATA device, and that it should be controlled using
hdparm. If your /dev/sdX drives are really SCSI drives, disable this option.

.IP "\fBACPI_WITHOUT_AC_EVENTS\fP" 10 
Enable this option if you have a laptop with a buggy ACPI implementation 
that doesn't send out AC adapter events. Enabling this option will 
make laptop mode check the AC adapter state whenever the battery 
state changes, which achieves just about the same effect as responding 
to AC adapter events.

.IP "\fBCONTROL_MOUNT_OPTIONS\fP" 10 
When this option is enabled, laptop mode tools is allowed to control the mount
options for your filesystems. Disabling this will break \fBCONTROL_NOATIME\fP, but it
will most probably also break laptop mode itself, as changes to the mount
options are crucial for achieving spun-down hard drives.

.IP "\fBLM_DIRTY_RATIO\fP" 10 
.IP "\fBNOLM_DIRTY_RATIO\fP" 10 
This option specifies the percentage of system memory that is allowed to
contain unwritten modified data when laptop mode is active. 
 
.IP "\fBLM_DIRTY_BACKGROUND_RATIO\fP" 10 
.IP "\fBNOLM_DIRTY_BACKGROUND_RATIO\fP" 10 
This option specifies the percentage of system memory that is allowed to
contain unwritten modified data after the DIRTY_RATIO barrier has been crossed.
The effect of this option is that when more than DIRTY_RATIO percent of memory
contains modified data, the system will synchronously write back data until
only DIRTY_BACKGROUND_RATIO percent of memory contains modified data. 

.IP "\fBDEF_UPDATE\fP" 10 
.IP "\fBDEF_XFS_AGE_BUFFER\fP" 10 
.IP "\fBDEF_XFS_SYNC_INTERVAL\fP" 10 
.IP "\fBDEF_XFS_BUFD_INTERVAL\fP" 10 
.IP "\fBDEF_MAX_AGE\fP" 10 
These options contain the default (non-laptop-mode) values for some kernel
options that are modified when laptop mode is active. You do not normally need
to change these, they represent the normal kernel defaults. 

.IP "\fBXFS_HZ\fP" 10 
This option specifies the number of units in a second that is utilized by a 2.4
kernel. If you run a 2.4 kernel with an XFS filesystem on non-Intel hardware,
you need to change this option to reflect the kernel "ticks per second" value,
which is the kernel variable HZ. Unfortunately this is not exposed anywhere, so
you'll have to specify it manually.

.IP "\fBLM_SECONDS_BEFORE_SYNC\fP         " 10 
The number of seconds that laptop mode waits after the disk goes idle before it
starts a full sync. This should always be less than your hard disk idle timeout,
because otherwise you'll have a sync directly after your drive spins down. Two
seconds is usually a good value for this option.
 
.IP "\fBXFS_HZ\fP         " 10 
This option expresses the unit of the XFS tuning parameters. The 
default is 100. This option is only useful for 2.4 kernels that have a 
value for HZ that is not 100. In the 2.6 kernel series, the XFS interfaces 
were modified to always use USER_HZ (which is currently always 100), 
so for these kernels you do not need to modify this value. Also, on 2.4 
kernels the value of HZ is 100 for the most common architectures, so 
you need only change this value if you use a less common architecture. 


.SS "\fI/etc/laptop-mode/conf.d/ethernet.conf\fP"

The ethernet module allows you to control the behavior of your ethernet devices
during AC and battery states.

.IP "\fBCONTROL_ETHERNET\fP" 10 
Enable this to control various aspects of power savings in the ethernet devices.

.IP "\fBBATT_THROTTLE_ETHERNET=1\fP" 10
.IP "\fBLM_AC_THROTTLE_ETHERNET=0\fP" 10
.IP "\fBNOLM_AC_THROTTLE_ETHERNET=0\fP" 10
These options specify the power states in which you would like to control the
ethernet device

.IP "\fBTHROTTLE_SPEED\fP" 10 
Here, you can specify the throttling speed for your ethernet device. The default
is "slowest". Valid values are "slowest", "fastest" or the speed of your ethernet
device, like 1000. To know the exact speed of your ethernet device, you can use
the ethtool tool.

.IP "\fBDISABLE_WAKEUP_ON_LAN\fP" 10 
This setting controls the option to enable/disable the WoL (Wake On LAN) feature.
It permanently disables the WOL feature on the ethernet device. Default is 1.
Set it to 0 to enable the WOL feature.

.IP "\fBETHERNET_DEVICES\fP" 10 
Specify the list of ethernet devices to control. Defaults to eth0

.IP "\fBDISABLE_ETHERNET_ON_BATTERY\fP" 10 
Set this to 1 if you want to completely disable your ethernet device when running on
battery, and when no carrier is detected on the interface (e.g., no active cable is
plugged in). Default is 0

.SS "\fI/etc/laptop-mode/conf.d/cpuhotplug.conf\fP"

The cpuhotplug module allows you to switch off the CPU cores when running on battery

.IP "\fBCONTROL_CPU_HOTPLUG\fP" 10 
When this option is enabled, Laptop Mode Tools can hotplug your CPU, thus switching
it offline, and conserving some power.
NOTE: This module is NOT enabled by default

.SS "\fI/etc/laptop-mode/conf.d/cpufreq.conf\fP"

The cpufreq module allows you to control the Linux kernel's CPU frequency
scaling settings.

.IP "\fBCONTROL_CPU_FREQUENCY\fP" 10 
When this option is enabled, laptop mode tools controls your CPU's frequency
scaling bounds and the scaling governor. This option is currently only supported
on 2.6 kernels. 
 
.IP "\fBBATT_CPU_MAXFREQ\fP" 10
.IP "\fBBATT_CPU_INFREQ\fP" 10
.IP "\fBBATT_CPU_GOVERNOR\fP" 10
.IP "\fBBATT_CPU_IGNORE_NICE_LOAD\fP" 10
.IP "\fBLM_AC_CPU_MAXFREQ\fP" 10
.IP "\fBLM_AC_CPU_MINFREQ\fP" 10
.IP "\fBLM_AC_CPU_GOVERNOR\fP" 10
.IP "\fBLM_AC_CPU_IGNORE_NICE_LOAD\fP" 10
.IP "\fBNOLM_AC_CPU_MAXFREQ\fP" 10
.IP "\fBNOLM_AC_CPU_MINFREQ\fP" 10
.IP "\fBNOLM_AC_CPU_GOVERNOR\fP" 10
.IP "\fBNOLM_AC_CPU_IGNORE_NICE_LOAD\fP" 10
These options specify the CPU frequency bounds and scaling governor in the
various power states. You can change the \fBMAXFREQ\fP and \fBMINFREQ\fP values to any
value listed in
.ce 1000
\fI/sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies\fP.
.ce 0
In addition, you can use "fastest" and "slowest". The GOVERNOR option controls
the setting for \fI/sys/devices/system/cpu/cpufreq/scaling_governor\fP. The
available options are dependent on the installed kernel. The most
common ones are "conservative", "performance" and "ondemand". The
\fBIGNORE_NICE_LOAD\fP
option controls a setting that is available for the "conservative" and "ondemand"
governors. Set this option to 1 if you want the frequency scaling governor to
not increase the CPU frequency for the sake of low-priority ("nice") background
processes.

.IP "\fBCONTROL_CPU_THROTTLING\fP" 10 
When this option is enabled, laptop mode tools controls your CPU's throttling level.
It is only useful if your CPU doesn't support frequency scaling.
This option is only supported on some ACPI hardware.
 
.IP "\fBBATT_CPU_THROTTLING\fP" 10
.IP "\fBLM_AC_CPU_THROTTLING\fP" 10
.IP "\fBNOLM_AC_CPU_THROTTLING\fP" 10
These options specify the throttling level for the CPU in the various power states.
You can change it to any level listed in 
.I /proc/acpi/processor/CPU0/throttling
(use only the number!). In addition, you can use "maximum" (which is the slowest
option), "minimum" (full speed) and "medium" (about halfway).


.SS "\fI/etc/laptop-mode/conf.d/sched-smt-power-savings.conf\fP"

The sched-smt-power-savings module controls the behavior of the process scheduler
on SMT boxes, when running in battery mode.

.IP "\fBCONTROL_SCHED_SMT_POWER_SAVINGS\fP" 10
Set this to 1 to enable power savings in the process scheduler for SMT processors.


.SS "\fI/etc/laptop-mode/conf.d/dpms-standby.conf\fP"

The dpms-standby module allows you to control the DPMS standby timeouts for
X displays.

.IP "\fBCONTROL_DPMS_STANDBY\fP" 10
When this option is enabled, laptop mode will control the DPMS
standby timeout for all X displays on the machine that users have logged on to.
In short, this allows laptop mode to control the time after which your screen
is blanked.

There is one limitation to this feature: the settings are not automatically
applied to new X logons. This can be fixed by configuring the display
manager. For the gdm display manager, configure a PostLogin directory
(usually \fI/etc/gdm/PostLogin\fP or \fI/etc/X11/gdm/PostLogin\fP), and in that directory
create a shell script called Default. In that file, include the command:

.IP "" 15
( sleep 60 ; /usr/sbin/laptop_mode force ) &

Similar configurations are possible for other window managers. Please consult
your window manager documentation for more information.

.IP "\fBBATT_DPMS_STANDBY\fP" 10
.IP "\fBLM_AC_DPMS_STANDBY\fP" 10
.IP "\fBNOLM_AC_DPMS_STANDBY\fP" 10
These options specify the display standby timeouts for the X displays, in
seconds.




.SS "\fI/etc/laptop-mode/conf.d/terminal-blanking.conf\fP"

The terminal-blanking module allows you to control the terminal blanking
timeouts for the Linux text console.

.IP "\fBCONTROL_TERMINAL\fP" 10
When this option is enabled, laptop mode will control the terminal blanking
settings for Linux's virtual consoles.

.IP "\fBTERMINALS\fP" 10
This option should contain a space-separated list of console device files that
should be affected by the terminal blanking settings. Only
one console device file needs to be included, because the settings are shared
between all virtual consoles. By default this setting is set to \fI/dev/tty1\fP.

.IP "\fBBATT_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBLM_AC_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBNOLM_AC_TERMINAL_BLANK_MINUTES\fP" 10
.IP "\fBBATT_TERMINAL_POWERDOWN_MINUTES\fP" 10
.IP "\fBLM_AC_TERMINAL_POWERDOWN_MINUTES\fP" 10
.IP "\fBNOLM_AC_TERMINAL_POWERDOWN_MINUTES\fP" 10
These options specify the terminal blanking and powerdown timeouts, in
minutes. The allowed ranges are 1-60 minutes, or 0 to disable blanking
or powerdown. The values are cumulative: the powerdown value is counted
from the moment of screen blanking, not from the start of inactivity.




.SS "\fI/etc/laptop-mode/conf.d/lcd-brightness.conf\fP"

The lcd-brightness module allows you to control the brightness of your LCD
screen.

.IP "\fBCONTROL_BRIGHTNESS\fP" 10
When this option is enabled, laptop mode will adjust your LCD screen's
brightness settings, if possible. You must configure the following settings
for this to work.

.IP "\fBBATT_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBLM_AC_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBNOLM_AC_BRIGHTNESS_COMMAND\fP" 10
.IP "\fBBRIGHTNESS_OUTPUT\fP" 10
The \fBBRIGHTNESS_COMMAND\fP settings specify commands that should be executed
in order to set the brightness of your LCD. The \fBBRIGHTNESS_OUTPUT\fP setting
specifies where the output of the command will be written. For instance,
if your LCD's brightness is adjusted by writing a numeric value 3 to a file
called \fI/proc/brightness\fP, you should set the command to "echo 3" and the
output file to "/proc/brightness". If your LCD's brightness is adjusted
using a utility like "toshset", you should include the entire toshset
command line as the command, and set the output file to "/dev/null".


.SS "\fI/etc/laptop-mode/conf.d/kbd-backlight.conf\fP"

The kbd-backlight module allows you to control the brightness of your LCD
screen.

.IP "\fBCONTROL_KBDLIGHT\fP" 10
When this option is enabled, laptop mode will adjust your keyboard backlight
brightness settings, if possible. You must configure the following settings
for this to work.

.IP "\fBBATT_KBDLIGHT_COMMAND\fP" 10
.IP "\fBLM_AC_KBDLIGHT_COMMAND\fP" 10
.IP "\fBNOLM_AC_KBDLIGHT_COMMAND\fP" 10
.IP "\fBKBD_BRIGHTNESS_OUTPUT\fP" 10
The \fBKBDLIGHT_COMMAND\fP settings specify commands that should be executed
in order to set the brightness of your keyboard backlight.
The \fBKBD_BRIGHTNESS_OUTPUT\fP setting specifies where the output of the 
command will be written. For instance, if your keyboard's backlight brightness 
is adjusted  by writing a numeric value 3 to a file called \fI/proc/brightness\fP, 
you should set the command to "echo 3" and the output file to "/proc/brightness". 
If your LCD's brightness is adjusted using a utility like "toshset", you should 
include the entire toshset command line as the command, and set the output file 
to "/dev/null".



.SS "\fI/etc/laptop-mode/conf.d/auto-hibernate.conf\fP"

The auto-hibernate module allows you to automatically hibernate your computer
when the battery goes critical or when the battery level goes below a certain
threshold.

.IP "\fBENABLE_AUTO_HIBERNATION\fP" 10
When this option is enabled, laptop mode will automatically hibernate your
computer when the battery level reaches a certain configurable threshold. This
feature is only available when ACPI is enabled.

.IP "\fBHIBERNATE_COMMAND\fP" 10
This option specifies the command that laptop mode should execute when
auto-hibernation is triggered. Normally, this is set to something like
"/usr/sbin/hibernate".

.IP "\fBAUTO_HIBERNATION_BATTERY_CHARGE_PERCENT\fP" 10
The battery level threshold for auto-hibernation, as a percentage of total
battery design capacity.

.IP "\fBAUTO_HIBERNATION_ON_CRITICAL_BATTERY_LEVEL\fP" 10
When this option is enabled, auto-hibernation will kick in when the battery
reports its state as "critical".

.SS "\fI/etc/laptop-mode/conf.d/battery-level-polling.conf\fP"

Some battery hardware does not send out proper level change events, or too
infrequent ones. For such hardware, laptop mode tools will not detect that the
battery has reached a critical level. The battery-level-polling module allows
you to use the auto-hibernate module and the other battery level dependent
features of laptop mode tools even when your battery does not send out frequent
ACPI to indicate a change in level.

.IP "\fBCONTROL_BATTERY_LEVEL_POLLING\fP" 10
When this option is enabled, laptop mode tools will automatically poll the
battery level every once in a while to see if the levels have changed, and to
see if actions should be taken as a consequence.

.SS "\fI/etc/laptop-mode/conf.d/start-stop-programs.conf\fP"

The start-stop-programs module allows you to start or stop programs when the
computer switches to a different power state.

.IP "\fBCONTROL_START_STOP\fP" 10
If this option is enabled, laptop mode tools will automatically start and stop
daemons or other programs for you. The actual configuration of which daemons
are to be stopped/started is done by placing links to the daemons' init scripts
in the following directories:
.IP "             \fI/etc/laptop-mode/batt-start\fP"
.IP "             \fI/etc/laptop-mode/batt-stop\fP"
.IP "             \fI/etc/laptop-mode/lm-ac-start\fP"
.IP "             \fI/etc/laptop-mode/lm-ac-stop\fP"
.IP "             \fI/etc/laptop-mode/nolm-ac-start\fP"
.IP "             \fI/etc/laptop-mode/nolm-ac-stop\fP"
As you have probably guessed, the directories of the form "X-stop-daemons"
should contain init scripts of daemons that you want stopped in mode X, while
the directories of the form "X-start-daemons" should contain init scripts of
daemons that you want started in mode X. Of course, it is possible to put in
your own handling of modes as well: the only requirement on the scripts in the
directories is that they handle the "start" and "stop" commands, like init
scripts usually do.

The ordering of the script handling is as follows. When a mode is entered, the
actions of the previous mode are undone, in reverse order. This means that if
the previous mode had done "daemon1 stop", "daemon2 stop" and "daemon3 start",
then the undoing actions will be "daemon3 stop", "daemon2 start", "daemon1
start". After that, the stop-scripts for the new mode are called, and then the
start-scripts are called. Please note that there is no detection of
commonalities between modes at this point, i.e., if the mode you're coming
from and the mode you're going to both specify that a daemon "X" should be
stopped, then the daemon will be un-stopped (that is, started) while leaving
the previous mode, and then stopped again.


.IP "\fBBATT_STOP\fP" 10
.IP "\fBBATT_START\fP" 10
.IP "\fBLM_AC_STOP\fP" 10
.IP "\fBLM_AC_START\fP" 10
.IP "\fBNOLM_AC_STOP\fP" 10
.IP "\fBNOLM_AC_START\fP" 10
These options allow you to stop services (through their init scripts) in certain
power states. Specify a space-separated list of service names in these options.
These services are started/stopped together with the files from the directories
mentioned above. 




.SS "\fI/etc/laptop-mode/conf.d/ac97-powersave.conf\fP"

The ac97-powersave module allows you to enable the Intel AC97 integrated audio
power saving mode.

.IP "\fBCONTROL_AC97_POWER\fP" 10
If this option is enabled, laptop mode tools will automatically enable the
AC97 power saving settings. The power saving settings are always enabled, not
only on battery power.
Note: On some machines it has been reported that the AC97 power savings triggers
the annoying click sound during power state transitions


.SS "\fI/etc/laptop-mode/conf.d/nmi-watchdog.conf\fP"

The nmi-watchdog module allows you to enable the NMI Watchdog timer power savings.
Enabling this module lowers down one hw-pmu counter.

.IP "\fBCONTROL_NMI_WATCHDOG\fP" 10
If this option is enabled, laptop mode tools will automatically disable the
NMI Watchdog timer when on battery. This module is part of auto modules. Thus enabling
auto modules setting will activate this module automatically.

.SS "\fI/etc/laptop-mode/conf.d/pci-aspm.conf\fP"

The pcie-aspm module allows you to enable the PCI Express (PCIe) Active State
Power Management (ASPM).

.IP "\fBCONTROL_PCI_ASPM\fP" 10
If this option is enabled, laptop mode tools will enable PCI ASPM powersave
mode when on battery. This module is part of auto modules. Thus enabling
auto modules setting will activate this module automatically. PCIe ASPM may
require that the pcie_aspm=force kernel option is enabled.

.SS "\fI/etc/laptop-mode/conf.d/usb-autosuspend.conf\fP"

This option has been superseded by the new runtime-pm.conf settings

.SS "\fI/etc/laptop-mode/conf.d/runtime-pm.conf\fP"

The runtime-pm module allows you to enable the Runtime Power Management
framework for the Linux kernel.

.IP "\fBCONTROL_RUNTIME_AUTOSUSPEND\fP" 10
If this option is enabled, laptop mode tools will automatically enable the
USB autosuspend feature for all devices. The USB autosuspend feature will always
be enabled, not only on battery power.

.IP "\fBAUTOSUSPEND_RUNTIME_DEVID_BLACKLIST\fP" 10
Here, you can specify the list of USB IDs that should not use autosuspend.
Use lsusb to find out the IDs of your USB devices.
Example: AUTOSUSPEND_RUNTIME_DEVID_BLACKLIST="046d:c025 0123:abcd"

.IP "\fBAUTOSUSPEND_RUNTIME_DEVTYPE_BLACKLIST\fP" 10
Here, you can specify the list of device driver that should not use autosuspend.
The driver type is given by "DRIVER=..." in a device's uevent file
Example: AUTOSUSPEND_RUNTIME_DEVTYPE_BLACKLIST="usbhid usb-storage usbmouse"

.IP "\fBAUTOSUSPEND_USE_WHITELIST\fP" 10
Set this to use opt-in/whitelist instead of opt-out/blacklist for deciding
which devices should be autosuspended.
AUTOSUSPEND_USE_WHITELIST=0 means AUTOSUSPEND_*_BLACKLIST will be used.
AUTOSUSPEND_USE_WHITELIST=1 means AUTOSUSPEND_*_WHITELIST will be used.

.IP "\fBAUTOSUSPEND_RUNTIME_DEVID_WHITELIST\fP" 10
The list of Device IDs that should use autosuspend. Use system commands or
look into sysfs to find out the IDs of your devices.
Example: AUTOSUSPEND_DEVID_WHITELIST="046d:c025 0123:abcd"

.IP "\fBAUTOSUSPEND_RUNTIME_DEVTYPE_WHITELIST\fP" 10
The list of device driver types that should use autosuspend. The driver
type is given by "DRIVER=..." in a device's uevent file.
Example: AUTOSUSPEND_DEVTYPE_WHITELIST="usbhid usb-storage usbmouse"

.SS "\fI/etc/laptop-mode/conf.d/intel-hda-powersave.conf\fP"

The intel-hda-powersave module allows you to enable the Intel HDA integrated
audio power saving mode.

.IP "\fBCONTROL_INTEL_HDA_POWER\fP" 10
If this option is enabled, laptop mode tools will automatically enable the
Intel HDA power saving settings. The power saving settings are always enabled,
not only on battery power.




.SS "\fI/etc/laptop-mode/conf.d/configuration-file-control.conf\fP"

The configuration-file-control module allows you to switch between different
configuration files when the computer is in different power states.
.PP
The primary use for this feature is for controlling the configuration files
of syslog daemons. Syslog daemons have a tendency to sync their log files when
entries are written to them. This causes disks to spin up, which is not very
nice when you're trying to save power. The \fIsyslog.conf\fP configuration file
can be tweaked so that syslogd will \fInot\fP sync a given file, by prepending
the log file name with a dash, like this:

.IP "" 5
mail.*      -/var/log/mail/mail.log

.PP
.B "Note:"
This feature will NOT work if \fBCONTROL_SYSLOG_CONF\fP is set in laptop-mode.conf.
To start using this feature, remove the \fBCONTROL_SYSLOG_CONF\fP section in
laptop-mode.conf, and then restart the laptop-mode-tools service. The new config
files have different names than the old ones, and settings are NOT
migrated. You will have to do this manually.


.IP "\fBCONTROL_CONFIG_FILES\fP" 10
If this option is enabled, laptop mode tools will use the following options to
switch configuration files depending on the power state.

.IP "\fBCONFIG_FILES\fP" 10
This option should contain a space-separated list of configuration files that
should be switched around depending on the power state.
.IP "" 10
For each configuration file, the specific configuration files will be named as follows:

.IP "" 15
\.I <conffile>-nolm-ac

.IP "" 15
.I <conffile>-lm-ac

.IP "" 15
.I <conffile>-batt

.IP "" 10
The first file will be used when the system is on AC power and laptop mode
is not active. The second file will be used when the system is on AC power and
laptop mode is active. The third file will be used when the system is on
battery power.

.IP "" 10
When the laptop mode tools service is enabled, it will replace the
configuration files with a symlink to one of the three state-based
configuration files. The original configuration file will be saved as
<config file>.lmbackup, and it will be restored when the laptop mode tools
service is disabled.

.IP "" 10
When you add files to this list, make sure to also add the appropriate
programs and services to the configuration settings below.

.IP "" 10
You can create the alternate configuration files yourself. If you don't, they
will be created by laptop mode tools the next time it is restarted. To force
the files to be created, run the laptop-mode service init script with the
"restart" parameter.

.IP "\fBCONFIG_FILE_SIGNAL_PROGRAMS\fP" 10
This option should contain a space-separated list of programs that should be
signalled after the config files have been switched around. This only works for
programs that respond to the SIGHUP signal by reloading their configuration
files.

.IP "\fBCONFIG_FILE_RELOAD_SERVICES\fP" 10
This option should contain a space-separated list of services which should be
reloaded after the config files have been switched around.


.SS "\fI/etc/laptop-mode/conf.d/wireless-power.conf\fP"

The wireless-power module allows you to alter the power management settings
for wireless network adapters that support the iwconfig "power" option. This
module is not usable for Intel network adapters that use the iwlwifi or ipw
drivers, they are supported by separate modules described below.

.IP "\fBCONTROL_WIRELESS_POWER_SAVING\fP" 10
If this option is enabled, laptop mode tools will set the wireless power
saving mode settings based on the power state.

.IP "\fBWIRELESS_AC_POWER_SAVING\fP" 10
.IP "\fBWIRELESS_BATT_POWER_SAVING\fP" 10
These settings define the power saving modes on AC and on battery. The allowed
values are 0 (to disable power saving mode) and 1 (to enable power saving mode).


.SS "\fI/etc/laptop-mode/conf.d/wireless-ipw-power.conf\fP"

The wireless-ipw-power module allows you to alter the power management settings
for Intel PRO/Wireless 3945, 2100 and 2200 wireless network adapters. This
module is intended for use with the ipw3945, ipw2100, ipw2200 drivers, not with
the iwlwifi drivers.

.IP "\fBCONTROL_IPW_POWER\fP" 10
If this option is enabled, laptop mode tools will set the wireless power
management settings based on the power state.

.IP "\fBIPW3945_AC_POWER\fP" 10
.IP "\fBIPW3945_BATT_POWER\fP" 10
These settings define the power management levels for the ipw3945 driver. The
defaults are 6 for AC, and 7 for battery mode. The allowed values are 1 (highest
power) to 5 (lowest power), 6 (AC mode, full power) and 7 (battery mode, lowest
power).

.IP "\fBIPW2100_AC_POWER\fP" 10
.IP "\fBIPW2100_BATT_POWER\fP" 10
These settings define the power management levels for the ipw2100 driver. The
defaults are 0 for AC mode and 5 for battery mode.




.SS "\fI/etc/laptop-mode/conf.d/wireless-iwl-power.conf\fP"

The wireless-iwl-power module allows you to alter the power management settings
for Intel PRO/Wireless 3945 and Intel WiFi Link 4965 wireless network adapters.
This module is intended for use with the iwlwifi drivers, not with the old ipw
drivers.

.IP "\fBCONTROL_IWL_POWER\fP" 10
If this option is enabled, laptop mode tools will set the wireless power
management settings based on the power state.

.IP "\fBIWL_AC_POWER\fP" 10
.IP "\fBIWL_BATT_POWER\fP" 10
These settings define the power management levels on AC and on battery. The
defaults are 0 for AC, and 3 for battery mode. The allowed values are 0 (highest
power) to 5 (lowest power), 6 (AC mode, full power) and 7 (battery mode, lowest
power).


.SS "\fI/etc/laptop-mode/conf.d/exec-commands.conf\fP"

There can be many odd machines and many power savings settings, that laptop-mode-tools currently does not cover. If you run into a similar power saving problem, where you do not have a laptop-mode-tools module for it, you can use the exec-commands module to trigger the command during power state changes. Please do contribute back the power saving item as a module to the upstream developers.

.IP "\fBCONTROL_EXEC_COMMANDS\fP" 10
Set this to 0 to disable execution of custom commands during power state changes. Default is auto.

.IP "\fBBATT_EXEC_COMMAND_0=\fP" 10
.IP "\fBBATT_EXEC_COMMAND_1=\fP" 10
.IP "\fBLM_AC_EXEC_COMMAND_0=\fP" 10
.IP "\fBLM_AC_EXEC_COMMAND_1=\fP" 10
.IP "\fBNOLM_AC_EXEC_COMMAND_0=\fP" 10
.IP "\fBNOLM_AC_EXEC_COMMAND_1=\fP" 10
Here you can specify your custom command that will need to be executed. The numbers can grow up to 9. The command needs to be specified in double quotes


.SS "\fI/etc/laptop-mode/conf.d/eee-superhe.conf\fP"
The eee-superhe module allows you to control the CPU frequency scalling on the
EEE PC. It requires the eeepc_laptop kernel module to be loaded.

.IP "\fBCONTROL_SUPERHE\fP" 10
It this option is enabled, laptop mode tools will automatically control the FSB
speed on the EEE PC.

.IP "\fBBATT_SUPERHE\fP" 10
.IP "\fBLM_AC_SUPERHE\fP" 10
.IP "\fBNOLM_AC_SUPERHE\fP" 10
These settings define the power management levels on AC and on battery. The
defaults are 0 for LM_AC and NOLM_AC, and 2 for battery mode.


.SS "\fI/etc/laptop-mode/conf.d/hal-polling.conf\fP"

The hal-polling module allows you to control the polling of CD/DVD drives
by HAL. The polling is needed for some drives to detect inserted CDs, but it
uses a considerable amount of power. Enable this module to disable the polling,
but only if our drive doesn't need it, or if you are willing to mount CDs
manually in exchange for the power saving.

.IP "\fBCONTROL_HAL_POLLING\fP" 10
If this option is enabled, laptop mode tools will control the HAL polling
behaviour.

.IP "\fBBATT_DISABLE_HAL_POLLING\fP" 10
.IP "\fBAC_DISABLE_HAL_POLLING\fP" 10
These settings define the polling behaviour on AC and on battery. To disable
polling, set the options to 1, to enable, set them to 0.

.IP "\fBHAL_POLLING_DEVICES\fP" 10
This setting defines for which devices the polling behaviour will be altered.
It should contain a space separated list of devices.


.SS "\fI/etc/laptop-mode/conf.d/bluetooth.conf\fP"

The bluetooth module allows you to enable/disable bluetooth depending on the
power state.

.IP "\fBCONTROL_BLUETOOTH\fP" 10
If this option is enabled, laptop mode tools will enable/disable bluetooth
when the power state changes.

.IP "\fBBATT_ENABLE_BLUETOOTH\fP" 10
.IP "\fBAC_ENABLE_BLUETOOTH\fP" 10
These settings define whether bluetooth is enabled on AC and on battery. To
disable bluetooth, set the options to 0, to enable, set them to 1.

.IP "\fBBLUETOOTH_INTERFACES\fP" 10
This setting defines the interfaces the bluetooth module will control. It
should contain a space separated list of interfaces. (Note that you probably
have only one bluetooth interface, and it will probably be named "hci0".)


.SS "\fI/etc/laptop-mode/conf.d/intel-sata-powermgmt.conf\fP"

The intel-sata-powermgmt module allows you to enable the power saving mode for
Intel AHCI compliant SATA controllers. This power saving mode is also known as
Aggressive Link Power Management (ALPM).

.IP "\fBCONTROL_INTEL_SATA_POWER\fP" 10
If this option is enabled, laptop mode tools will automatically enable the
Intel SATA controller power saving settings. The power saving settings are
always enabled, not only on battery power.

.IP "\fBBATT_ACTIVATE_SATA_POWER=1\fP" 10
.IP "\fBLM_AC_ACTIVATE_SATA_POWER=0\fP" 10
.IP "\fBNOLM_AC_ACTIVATE_SATA_POWER=0\fP" 10
These settings control the behavior of the SATA devices under AC and battery power states



.SS "\fI/etc/laptop-mode/conf.d/sched-mc-power-savings.conf\fP"

The sched-mc-power-savings module allows you to tune the Linux kernel process
scheduler to optimize for power usage on multi-core and multi-processor
computers.

.IP "\fBCONTROL_SCHED_MC_POWER_SAVINGS\fP" 10
If this option is enabled, laptop mode tools will automatically configure the
kernel process scheduler to optimize for power usage on multi-core and
multi-processor computers. The optimizations will only be enabled in battery
mode.



.SS "\fI/etc/laptop-mode/conf.d/video-out.conf\fP"

The video-out module allows you to selectively disable video outputs depending
on the power status. This works only for video hardware that supports xrandr.

.IP "\fBCONTROL_VIDEO_OUTPUTS\fP" 10
If this option is enabled, laptop mode tools will automatically disable
the configured video outputs.

.IP "\fBBATT_DISABLE_VIDEO_OUTPUTS\fP" 10
.IP "\fBLM_AC_DISABLE_VIDEO_OUTPUTS\fP" 10
.IP "\fBNOLM_AC_DISABLE_VIDEO_OUTPUTS\fP" 10
These settings define which video outputs are to be disabled in which power
state. The format is a space-separated list of outputs. The allowed names of the
outputs depend on what the video hardware supports, they can be found by running
the "xrandr" command.


.SH "SEE ALSO" 
.PP 
laptop_mode(8).
.PP
lm-profiler(8).
.PP 
hdparm(8).
.SH "AUTHOR" 
.PP 
This manual page was written by Bart Samwel (bart@samwel.tk).
Permission is granted to copy, distribute and/or modify this document under 
the terms of the GNU General Public License, Version 2 any  
later version published by the Free Software Foundation. 
 
.\" created by instant / docbook-to-man, Tue 09 Nov 2004, 23:14 
